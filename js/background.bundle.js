(()=>{"use strict";function t(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function n(t,n){chrome.storage.local.get(t,(function(t){n(t)}))}function e(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;chrome.storage.local.set(t({},n,e),(function(){null!==o&&o()}))}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e={active:!0,currentWindow:!0};null!==n&&(e.url=n),chrome.tabs.query(e,t)}console.log("Background Script Running"),chrome.commands.onCommand.addListener((function(t){"add-timestamp"===t&&function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o((function(e){e.length>0&&chrome.tabs.sendMessage(e[0].id,t,n)}),"https://www.youtube.com/watch?v=*")}({msg:"obtain-timestamp"},(function(t){var o;chrome.runtime.lastError||!t||(function(t){var o=t.videoId,i=t.title,a=t.timestamp,r=t.label,l=void 0===r?"":r,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(o,(function(t){var n={title:i,timestamps:{}};o in t&&(n=t[o]),n.timestamps[a]=l,e(o,n,u)}))}(t),o=t,chrome.runtime.sendMessage({msg:"update-timestamp",timestampData:o}))}))}))})();